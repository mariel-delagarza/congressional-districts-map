<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Congressional Districts Map</title>
    <link rel="stylesheet" href="css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://unpkg.com/maplibre-gl@3.3.1/dist/maplibre-gl.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="container">
      <div id="map-wrapper">
        <div id="map"></div>
        <div id="loading-overlay">Loading mapâ€¦</div>
      </div>
      <div id="info-panel">
        <h2 id="select-district">Select a district</h2>
        <div id="rep-info">
          <p id="rep-instructions">
            Click on any district to view its representative and demographic
            information.
          </p>
          <div id="rep-details" style="display: none">
            <div class="rep-header">
              <img id="rep-photo" src="" alt="Representative Photo" />
              <div class="rep-info-text">
                <span id="district-name">District Label</span>
                <a class="rep-name" href="#" target="_blank">Name (Party)</a>

                <div class="rep-contact-links">
                  <a id="rep-website" href="#" target="_blank"
                    >Official website</a
                  >
                  <a id="rep-contact-form" href="#" target="_blank"
                    >Contact form</a
                  >
                </div>

                <div class="rep-socials"></div>
              </div>
            </div>

            <div class="rep-details-content">
              <!-- <ul id="contact-links"></ul> -->

              <h3>Demographic Snapshot</h3>
              <p>Total Population: <span id="total-population"></span></p>
              <div id="demographic-bars">
                <h4>Who lives here?</h4>
                <div class="bar-row" id="row-under-17">
                  <span class="label">17 and Under</span>
                  <span class="value" id="value-under-17"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-under-17"></div>
                  </div>
                </div>
                <div class="bar-row" id="row-over-65">
                  <span class="label">65 and Over</span>
                  <span class="value" id="value-over-65"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-over-65"></div>
                  </div>
                </div>
                <div class="bar-row" id="row-white">
                  <span class="label">White</span>
                  <span class="value" id="value-white"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-white"></div>
                  </div>
                </div>
                <div class="bar-row" id="row-black">
                  <span class="label">Black</span>
                  <span class="value" id="value-black"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-black"></div>
                  </div>
                </div>

                <div class="bar-row" id="row-poverty">
                  <span class="label">Below Poverty</span>
                  <span class="value" id="value-poverty"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-poverty"></div>
                  </div>
                </div>
                <div class="bar-row" id="row-no-hs">
                  <span class="label">No High School Diploma</span>
                  <span class="value" id="value-no-hs"></span>
                  <div class="bar-container">
                    <div class="bar" id="bar-no-hs"></div>
                  </div>
                </div>
              </div>
              <!--end #demographic-bars -->
              <details>
                <summary>Get the Data</summary>
                <p>
                  The complete data can be found at the Census Bureau's website
                  <a href="https://www.census.gov/mycd/"
                    >"My Congressional District"</a
                  >. If you click on a state and a district, you will see the
                  complete information for that district. At the bottom, you
                  will see a share icon and the text "Download and Share".
                  Clicking on this provides the option to download the
                  information for only that district or for all districts in the
                  state.
                </p>
              </details>
              <details>
                <summary>Population Details</summary>
                <p>
                  The U.S. Census Bureau provides several population totals to
                  use when analyzing this demographic data. One is the absolute
                  total population, which is provided above as "Total
                  Population". The others include: total civilian
                  noninstitutionalized population, total housing units, total
                  households, and the population aged 25 years or older.
                </p>
                <ul>
                  <li>
                    <strong
                      >Total Civilian Noninstitutionalized Population:</strong
                    >
                    <p>
                      The civilian noninstutitional population is defined as,
                      "People ages 15 or 16 and older residing in the 50 states
                      and the District of columbia who do not live in
                      institutions and who are not on Active Duty in the Armed
                      Forces." (<a href="https://www.bls.gov/bls/glossary.htm#C"
                        >BLS glossary</a
                      >)
                    </p>
                    <p>
                      Institutions include "adult correctional facilities,
                      juvenile facilities, skilled-nursing facilities, and other
                      institutional facilities such as mental (psychiatric)
                      hospitals and in-patient hospice facilities." (<a
                        href="https://www.census.gov/glossary/?term=Institutionalized+population"
                        >Census Bureau Glossary</a
                      >)
                    </p>
                    <p>
                      This number is used to calculate the percentage of people
                      with disabilities and the percentage of people with health
                      insurance.
                    </p>
                  </li>
                  <li>
                    <strong>Total Households:</strong>
                    <p>
                      This value is used when analyzing population income
                      levels. A "household" is defined as "all the people who
                      occupy a housing unit (such as a house or apartment) as
                      their usual place of residence". (<a
                        href="https://www.census.gov/glossary/?term=Household"
                        >Census Bureau Glossary</a
                      >)
                    </p>
                  </li>
                  <li>
                    <strong>Population Aged 25 Years or Older:</strong>
                    <p>
                      For demographic data involving education levels, the
                      Census Bureau provides the population aged 25 years or
                      older.
                    </p>
                  </li>
                </ul>
                <p>
                  The Census Bureau instructs that: "If calculating a
                  percentage, use the total population line within the section
                  as the denominator. Do not use total population lines from
                  other sections since these may have different universes."
                </p>
                <p>
                  The percentages shown in the bar charts were calculated in
                  accordance with this instruction.
                </p>
              </details>
            </div>
            <!--end .rep-details-content  -->
          </div>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/maplibre-gl@3.3.1/dist/maplibre-gl.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script type="module" src="javascript/script.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
  </body>
</html>
